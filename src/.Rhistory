plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
name_herbicide
cex.title=2
par(mar=c(1,1,1,1))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
text(x=0, y=0, lab=name_herbicide, cex=cex.title)
layout(LAYOUT)
### Herbicide name writing function
plot_herbicide_name = function(name_herbicide, colour_herbicide, cex.title=1){
par(mar=c(1,1,1,1))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
text(x=0, y=0, lab=name_herbicide, cex=cex.title)
}
### Histogram plotting function
plot_hist = function(vec_resistance, name_herbicide, colour_herbicide, df_farmer){
par(mar=c(5,5,1,5))
obj_hist = hist(vec_resistance*100, col=rgb(0.5,0.5,0.5,alpha=0.6), nclass=10, bord=FALSE, main="", ylab="Number of Populations", xlab=paste0(name_herbicide, " Resistance (%)"))
grid()
x = eval(parse(text=paste0("df_farmer$", name_herbicide, "_SURVI*100")))
y = rev(seq(from=1, to=max(obj_hist$counts)-1, length=10))[1:nrow(df_farmer)]
vec_labels = paste0(df_farmer$Location, ": ", df_farmer$Coordinates_N, "N, ", df_farmer$Coordinates_E, "E")
vec_percentiles = c()
for (i in 1:nrow(df_farmer)){
# i = 1
lines(x=c(x[i], x[i]), y=c(0, y[i]), lwd=2, col=colour_herbicide)
points(x=x[i], y=y[i], bg=colour_herbicide, pch=25)
text(x=x[i], y=y[i], lab=i, pos=4)
percentile = round(sum(vec_resistance<=y[i]/100)/length(vec_resistance)*100)
if ((percentile %% 10)==1 & (percentile>20 | percentile<10)){
percentile = paste0(percentile, "st")
} else if ((percentile %% 10)==2 & (percentile>20 | percentile<10)){
percentile = paste0(percentile, "nd")
} else if ((percentile %% 10)==3 & (percentile>20 | percentile<10)){
percentile = paste0(percentile, "rd")
} else {
percentile = paste0(percentile, "th")
}
vec_percentiles = c(vec_percentiles, paste0(vec_labels[i], " (", percentile, " percentile)"))
}
return(vec_percentiles)
}
# vec_percentiles = plot_hist(vec_resistance, name_herbicide, colour_herbicide, df_farmer)
## Population names legend writing function
plot_legend = function(vec_percentiles, colour_herbicide, cex.text=1){
par(mar=c(1,1,1,5))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
legend(x="center", pch=25, pt.bg=colour_herbicide, col=colour_herbicide, legend=paste0(1:length(vec_percentiles), ": ", vec_percentiles), bty="n", cex=cex.text)
}
# plot_legend(vec_percentiles, colour_herbicide)
## Heatmap plotting function
library(maps)
plot_heatmap = function(name_herbicide, df_farmer){
landscape_gradient = readRDS(paste0("../data/landscape_surfaces_gradient_data_", name_herbicide, ".rds"))
predx = landscape_gradient$predx
predy = landscape_gradient$predy
Z = landscape_gradient$Z
### colou specifications
ncolors = 25 ### 25 is a nice number to see dicrete contour lines across the landscape methinks...
color_gradient = rev(colorRampPalette(c("#A50026","#D73027","#F46D43","#FDAE61","#FEE08B","#FFFFBF","#D9EF8B","#A6D96A","#66BD63","#1A9850","#006837"))(ncolors))
### define x-y limits
dx=c(min(predx), max(predx))
dy=c(min(predy), max(predy))
xaxis = seq(round(min(predx)), round(max(predx)), 2)
yaxis = seq(round(min(predy))-2, round(max(predy))+2, 2)
### prepare the box enclosing the map
par(mar=c(5,2,1,1))
plot(0, xlim=dx, ylim=dy, asp=1, type="n", xlab="Longitude", ylab="Latitdue", main="", xaxt="n", yaxt="n") #empty
### overlay the heatmap
par(new=TRUE)
image(x=predx, y=predy, z=Z, col=color_gradient[round(min(Z)*ncolors):round(max(Z)*ncolors)], xlab="", ylab="", main="", asp=1, xaxt="n", yaxt="n")
### extract the bounding box of the map
outline = maps::map("world", plot=FALSE)
xrange = range(outline$x, na.rm=TRUE)
yrange = range(outline$y, na.rm=TRUE)
xbox = xrange + c(-2, 2)
ybox = yrange + c(-2, 2)
### draw the outline of the map and color the water blue
polypath(c(outline$x, NA, c(xbox, rev(xbox))),
c(outline$y, NA, rep(ybox, each=2)),
col="light blue", rule="evenodd")
### name the ticks with degree signs ("\U00B0")
axis(side=1, at=xaxis, labels=paste0(xaxis, "\U00B0"))
axis(side=2, at=yaxis, labels=paste0(yaxis, "\U00B0"),las=2)
### add a grid 'cause it looks noice
grid(col="darkgray")
### plot points
par(new=TRUE)
plot(0, xlim=dx, ylim=dy, asp=1, type="n", xlab="", ylab="", main="", xaxt="n", yaxt="n") #empty
# plot(0, xlim=dx, ylim=dy, asp=1, type="n", xlab="", ylab="", main="")
for (i in 1:nrow(df_farmer)){
x = df_farmer$Coordinates_E[i]
y = df_farmer$Coordinates_N[i]
r = eval(parse(text=paste0("df_farmer$", name_herbicide, "_SURVI")))[i]
if (!is.na(r)){
points(x, y, col="black", bg=color_gradient[round(r*ncolors)+1], pch=19)
### draw arrows and number labels
if (median(df_farmer$Coordinates_E)<144){
x1 = x-i
y1 = y-(median(1:nrow(df_farmer))-(i*0.75))
} else {
x1 = x-i
y1 = y-(median(1:nrow(df_farmer))-(i*0.75))
}
arrows(x0=x, y0=y, x1=x1, y1=y1, length=0.1)
text(x1, y1, lab=i, pos=2)
}
}
return(color_gradient)
}
# color_gradient = plot_heatmap(name_herbicide, df_farmer)
## Heat map legend plotting function
plot_heatmap_legend = function(color_gradient){
legend_x=seq(from=0,to=1, length=length(color_gradient))
legend_y=seq(from=0, to=100, length=length(color_gradient))
legend_z = matrix(rep(legend_x, times=length(color_gradient)), byrow=TRUE, nrow=length(color_gradient))
par(mar=c(3,3,3,1))
plot(x=c(0,100), y=c(0,100), type="n", xlab="", ylab="", xaxt="n", yaxt="n", main="")
par(new=TRUE)
image(x=legend_x, y=legend_y, z=legend_z, col=color_gradient, xlab="", ylab="", main="", xaxt="n", las=2)
mtext("Completely\nResistant", side=3, line=0.5, at=0.5)
mtext("Completely\nSusceptible", side=1, line=1.5, at=0.5)
}
# plot_heatmap_legend(color_gradient)
### EXECUTIONER
### (1) Inputs
fname_data = "../data/combined_dataframe.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
name_farmer = "BASH_REPLACE_WITH_FARMER_NAME"
### test
name_farmer = "Brent Alexander"
### Plots layout
r = 5
rl = 1
LAYOUT = matrix(c(rep(1,r), rep(3,r), rep(4,rl),
rep(1,r), rep(3,r), rep(4,rl),
rep(2,r), rep(3,r), rep(4,rl)), nrow=3, byrow=TRUE)
### Iterate across herbicides
i = 4
list_herbicides = c("Clethodim", "Glyphosate", "Sulfometuron", "Terbuthylazine")
list_colours = c("#BF7EBE", "#FFBF7F", "#8BA5F2", "#FF7F7E", "#78C679")
name_herbicide = list_herbicides[i]
colour_herbicide = list_colours[i]
df_farmer = dat[dat$Farmer_Agronomist==name_farmer, c(1:12, grep(name_herbicide, colnames(dat)))]
df_farmer = df_farmer[!is.na(df_farmer[, grepl("_SURVI", colnames(df_farmer))]), ]
df_farmer = df_farmer[order(df_farmer[, grepl("_SURVI", colnames(df_farmer))], decreasing=FALSE), ]
vec_resistance = dat[, grep(paste0(name_herbicide, "_SURVI"), colnames(dat))]
vec_resistance = vec_resistance[!is.na(vec_resistance)]
if (nrow(df_farmer)==0){
next
}
### title
layout(matrix(1,nrow=1))
plot_herbicide_name(name_herbicide, colour_herbicide, cex.title=2)
### layout
layout(LAYOUT)
### histogram
vec_percentiles = plot_hist(vec_resistance, name_herbicide, colour_herbicide, df_farmer)
### population names
plot_legend(vec_percentiles, colour_herbicide, cex.text=1.25)
### heat map
color_gradient = plot_heatmap(name_herbicide, df_farmer)
### heat map legend
plot_heatmap_legend(color_gradient)
r = 5
rl = 1
LAYOUT = matrix(c(rep( rep(1,r), rep(3,r), rep(4,rl), times=2 ),
rep( rep(2,r), rep(3,r), rep(4,rl), times=2 )), nrow=3, byrow=TRUE)
LAYOUT = matrix(c(rep( rep(1,r), rep(3,r), rep(4,rl), times=2 ),
rep( rep(2,r), rep(3,r), rep(4,rl), times=1 )), nrow=3, byrow=TRUE)
rep( rep(1,r), rep(3,r), rep(4,rl), times=2 )
LAYOUT = matrix(c(rep( c(rep(1,r), rep(3,r), rep(4,rl)), times=2 ),
rep( c(rep(2,r), rep(3,r), rep(4,rl)), times=1 )), nrow=3, byrow=TRUE)
LYOUT
LAYOUT
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(1,r), rep(3,r), rep(4,rl)), times=4 ),
rep( c(rep(2,r), rep(3,r), rep(4,rl)), times=2 )), nrow=3, byrow=TRUE)
(2*r)+rl
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(1,r), rep(3,r), rep(4,rl)), times=4 ),
rep( c(rep(2,r), rep(3,r), rep(4,rl)), times=2 )), nrow=7, byrow=TRUE)
LAYOUT
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(2,r), rep(4,r), rep(5,rl)), times=4 ),
rep( c(rep(3,r), rep(4,r), rep(5,rl)), times=2 )), nrow=7, byrow=TRUE)
LAYOUT
### EXECUTIONER
### (1) Inputs
fname_data = "../data/combined_dataframe.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
name_farmer = "BASH_REPLACE_WITH_FARMER_NAME"
### test
name_farmer = "Brent Alexander"
### Plots layout
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(2,r), rep(4,r), rep(5,rl)), times=4 ),
rep( c(rep(3,r), rep(4,r), rep(5,rl)), times=2 )), nrow=7, byrow=TRUE)
layout(LAYOUT)
### Iterate across herbicides
i = 4
list_herbicides = c("Clethodim", "Glyphosate", "Sulfometuron", "Terbuthylazine")
list_colours = c("#BF7EBE", "#FFBF7F", "#8BA5F2", "#FF7F7E", "#78C679")
name_herbicide = list_herbicides[i]
colour_herbicide = list_colours[i]
df_farmer = dat[dat$Farmer_Agronomist==name_farmer, c(1:12, grep(name_herbicide, colnames(dat)))]
df_farmer = df_farmer[!is.na(df_farmer[, grepl("_SURVI", colnames(df_farmer))]), ]
df_farmer = df_farmer[order(df_farmer[, grepl("_SURVI", colnames(df_farmer))], decreasing=FALSE), ]
vec_resistance = dat[, grep(paste0(name_herbicide, "_SURVI"), colnames(dat))]
vec_resistance = vec_resistance[!is.na(vec_resistance)]
if (nrow(df_farmer)==0){
next
}
### title
layout(matrix(1,nrow=1))
plot_herbicide_name(name_herbicide, colour_herbicide, cex.title=2)
### histogram
vec_percentiles = plot_hist(vec_resistance, name_herbicide, colour_herbicide, df_farmer)
### population names
plot_legend(vec_percentiles, colour_herbicide, cex.text=1.25)
### heat map
color_gradient = plot_heatmap(name_herbicide, df_farmer)
### heat map legend
plot_heatmap_legend(color_gradient)
LAYOUT
fname_data = "../data/Lrigidum_RESISTANCE_2018-11.csv"
fname_herbicide_commercial_names = "../data/Lrigidum_RESISTANCE_2018-11.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
comm_names_herbicides = read.csv(fname_herbicide_commercial_names)
name_farmer = "BASH_REPLACE_WITH_FARMER_NAME"
### test
name_farmer = "Brent Alexander"
### Plots layout
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(2,r), rep(4,r), rep(5,rl)), times=4 ),
rep( c(rep(3,r), rep(4,r), rep(5,rl)), times=2 )), nrow=7, byrow=TRUE)
layout(LAYOUT)
par(cex=1.25)
comm_names_herbicides
fname_data = "../data/Lrigidum_RESISTANCES_2018-11.csv"
fname_herbicide_commercial_names = "../data/Lrigidum_HERBICIDES_2018-11.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
comm_names_herbicides = read.csv(fname_herbicide_commercial_names)
name_farmer = "BASH_REPLACE_WITH_FARMER_NAME"
### test
name_farmer = "Brent Alexander"
comm_names_herbicides
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=strwrap(DESCRIPTION), cex=cex.title)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=strwrap(DESCRIPTION, width=10), cex=cex.title)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=strwrap(DESCRIPTION, width=10), cex=cex.title)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=strwrap(DESCRIPTION), cex=cex.title)
unlist(strsplit(DESCRIPTION, "\n[ \t\n]*\n"))[-(1:3)]
unlist(strsplit(DESCRIPTION, "\n[ \t\n]*\n"))
unlist(strsplit(DESCRIPTION, " "))
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=strwrap(unlist(strsplit(DESCRIPTION, " ")), width=30), cex=cex.title)
?writeLines
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
# text(x=0, y=0, lab=strwrap(DESCRIPTION), cex=cex.title)
writeLines(setwrap(unlist(strsplit(DESCRIPTION, " ")), width=30))
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
# text(x=0, y=0, lab=strwrap(DESCRIPTION), cex=cex.title)
writeLines(strwrap(unlist(strsplit(DESCRIPTION, " ")), width=30))
x = strwrap(unlist(strsplit(DESCRIPTION, " ")), width=30)
x
?strwrap
strwrap(DESCRIPTION, width=30)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
# text(x=0, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title)
text(x=0, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title)
?text
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title, pos=1)
plot_herbicide_name = function(name_herbicide, colour_herbicide, df_comm_names, cex.title=1){
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title, pos=2)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title, pos=2)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=0, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title, pos=4)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=-1, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.title, pos=4)
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=-1, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.txt, pos=4)
cex.text=1
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = "sdkjhnfds sdlkhjslk sdlfijhsdlof jslfhsldfhsl dlasihdflishjdfjs loshdffljsl fsldjf"
text(x=-1, y=0, lab=paste(strwrap(DESCRIPTION, width=30), collapse="\n"), cex=cex.text, pos=4)
commercial_name = df_comm_names$COMMERCIAL_NAME[df_comm_names$HERBICIDE==name_herbicide]
fname_data = "../data/Lrigidum_RESISTANCES_2018-11.csv"
fname_herbicide_commercial_names = "../data/Lrigidum_HERBICIDES_2018-11.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
df_comm_names = read.csv(fname_herbicide_commercial_names)
commercial_name = df_comm_names$COMMERCIAL_NAME[df_comm_names$HERBICIDE==name_herbicide]
commercial_name
fname_data = "../data/Lrigidum_RESISTANCES_2018-11.csv"
fname_herbi_specs = "../data/Lrigidum_HERBICIDES_2018-11.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
df_herbi_specs = read.csv(fname_herbicide_commercial_names)
df_herbi_specs
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
.
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate
df_farmer
paste("Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide))))
1:nrow(df_farmer)
paste0("Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))))
DESCRIPTION = c(paste0("we used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."),
"The sample sizes of your populations were:\n",
paste0("Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))))
)
DESCRIPTION
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste0("we used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."),
"The sample sizes of your populations were:\n",
paste0("Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))))
)
text(x=-1, y=0, lab=paste(strwrap(paste(DESCRIPTION, collapse=" "), width=30), collapse="\n"), cex=cex.text, pos=4)
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."),
"The sample sizes of your populations were:\n",
paste0("- Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))), "\n")
)
text(x=-1, y=0, lab=paste(strwrap(paste(DESCRIPTION, collapse=" "), width=50), collapse="\n"), cex=cex.text, pos=4)
paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=50), collapse="\n")
width=width=75
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:\n",
paste0("- Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))), "\n")
)
DESCRIPTION
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:\n",
paste0("- Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))), "\n")
)
text(x=-1, y=0, lab=DESCRIPTION, cex=cex.text, pos=4)
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:\n",
paste0("- Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))), "\n")
)
text(x=-1, y=0, lab=paste0(DESCRIPTION, collapse="\n"), cex=cex.text, pos=4)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:\n
- Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))), "\n")
)
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:",
paste0("- Population ", 1:nrow(df_farmer), ": ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize"))))
)
text(x=-1, y=0, lab=paste0(DESCRIPTION, collapse="\n"), cex=cex.text, pos=4)
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
pre_or_post = df_herbi_specs$PRE_POST[df_herbi_specs$HERBICIDE==name_herbicide]
hrac_group = df_herbi_specs$HRAC[df_herbi_specs$HERBICIDE==name_herbicide]
au_group = df_herbi_specs$AU[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:",
paste0("- Population ", 1:nrow(df_farmer), " = ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize")))),
paste(strwrap(paste0(commercial_name, " is a ", pre_or_post, " herbicide. It belongs to group ", au_group, " which is the same as HRAC group ", hrac_group, "."), width=width), collapse="\n")
)
text(x=-1, y=0, lab=paste0(DESCRIPTION, collapse="\n"), cex=cex.text, pos=4)
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
pre_or_post = df_herbi_specs$PRE_POST[df_herbi_specs$HERBICIDE==name_herbicide]
hrac_group = df_herbi_specs$HRAC[df_herbi_specs$HERBICIDE==name_herbicide]
au_group = df_herbi_specs$AU[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:",
paste0("- Population ", 1:nrow(df_farmer), " = ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize")))),
paste(strwrap(paste0(name_herbicide, " is a ", pre_or_post, " herbicide. It belongs to group ", au_group, " which is the same as HRAC group ", hrac_group, "."), width=width), collapse="\n")
)
text(x=-1, y=0, lab=paste0(DESCRIPTION, collapse="\n"), cex=cex.text, pos=4)
fname_data = "../data/Lrigidum_RESISTANCES_2018-11.csv"
fname_herbi_specs = "../data/Lrigidum_HERBICIDES_2018-11.csv"
dat = read.csv(fname_data, header=TRUE, na.string="NA")
df_herbi_specs = read.csv(fname_herbicide_commercial_names)
commercial_name = df_herbi_specs$COMMERCIAL_NAME[df_herbi_specs$HERBICIDE==name_herbicide]
application_rate = df_herbi_specs$RATE[df_herbi_specs$HERBICIDE==name_herbicide]
pre_or_post = df_herbi_specs$PRE_POST[df_herbi_specs$HERBICIDE==name_herbicide]
hrac_group = df_herbi_specs$HRAC[df_herbi_specs$HERBICIDE==name_herbicide]
au_group = df_herbi_specs$AU[df_herbi_specs$HERBICIDE==name_herbicide]
par(mar=c(0,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
DESCRIPTION = c(paste(strwrap(paste0("We used ", commercial_name, " at ", application_rate, " g active ingredient per hectare."), width=width), collapse="\n"),
"The sample sizes of your populations were:",
paste0("- Population ", 1:nrow(df_farmer), " = ", eval(parse(text=paste0("df_farmer$", name_herbicide, "_sampleSize")))),
paste(strwrap(paste0(name_herbicide, " is a ", pre_or_post, " herbicide. It belongs to group ", au_group, " which is the same as HRAC group ", hrac_group, "."), width=width), collapse="\n")
)
text(x=-1, y=0, lab=paste0(DESCRIPTION, collapse="\n"), cex=cex.text, pos=4)
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(2,r), rep(4,r), rep(5,rl)), times=4 ),
rep( c(rep(3,r), rep(4,r), rep(5,rl)), times=2 ),
rep(6, ((2*r)+rl))*2), nrow=9, byrow=TRUE)
rep(6, ((2*r)+rl))*2)
rep(6, ((2*r)+rl))*2
r = 5
rl = 1
LAYOUT = matrix(c(rep(1, (2*r)+rl),
rep( c(rep(2,r), rep(4,r), rep(5,rl)), times=4 ),
rep( c(rep(3,r), rep(4,r), rep(5,rl)), times=2 ),
rep(6, ((2*r)+rl)*2)), nrow=9, byrow=TRUE)
LAYOUT
### Herbicide name writing function
plot_herbicide_name = function(name_herbicide, colour_herbicide, cex.title=1){
par(mar=c(1,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
text(x=0, y=0, lab=name_herbicide, cex=cex.title)
}
plot_herbicide_name(name_herbicide, colour_herbicide, cex.title=1)
plot_herbicide_name = function(name_herbicide, colour_herbicide, cex.title=1){
par(mar=c(1,0,0,0))
plot(x=c(-1,1), y=c(-1,1), type="n", xaxt="n", yaxt="n", xlab="", ylab="", bty="n")
rect(xleft=-1, ybottom=-1, xright=1, ytop=1, col=colour_herbicide, border=NA)
text(x=0, y=0, lab=name_herbicide, cex=cex.title)
}
1:length(list_herbicides)
